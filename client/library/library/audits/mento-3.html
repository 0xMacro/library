<page
  clientName="Mento"
  reportDate="March 11th, 2024"
  auditTitle="Mento A-3"
  auditVersion="1.0.0"
  repoUrl="https://github.com/mento-protocol/mento-core"
  repoCommitHash="472a1d9d776da3cd4cdabc281c3bbc30e97af15a"
  customRepoInfo
  passwordEncrypt="env:PAGE_PASS_MENTO_3"
  layout="/library/audits/_layout.html"
>
  <content-for name="schedule">
    The security audit was performed by the Macro security team from February 26, 2024 to February 28, 2024. 
  </content-for>

  <content-for name="spec">
    <ul>
      <li>Discussions on Telegram with the {{page.clientName}} team.</li>
      <li>Available documentation in the respective PRs.</li>
    </ul>

    <h2 id="tmaar">Trust Model, Assumptions, and Accepted Risks (TMAAR)</h2>
    <template type="audit-markdown">
        ### Roles

        - Governance:
            
            DAO governance contracts, where voting power for proposals is determined via snapshots of veMento tokens. Sends proposals to the timelock controller which can execute after a delay.
            
        - Timelock Controller:
            
            Executes proposals passed by the Governance contract after a 2 day delay. Is the owner of the Emission, Mento Token, and Vote escrowed Mento contracts. It also controls the adminProxy contract, allowing it to upgrade itself, Locking, Emissions, and the Governor contracts. 
            
        - Watchdog multisig:
            
            Multisig wallet that can cancel pending proposed transactions made to the timelock controller. 
            
        
        ### Assumptions
        
        - Vote escrowed tokens use block numbers to determines time under the assumption that Celo blocks are 5 seconds apart on average.
        - The Watchdog multisig is secure and only cancels proposals when it is in the best interest for the protocol.
    </template>

  </content-for>

  <content-for name="repo-info">
    <ul>
      <li>
        <b>PR 361:</b>
        <a
          href="https://github.com/mento-protocol/mento-core/pull/361"
          target="_blank"
        >
            /mento-core/pull/361
        </a>
      </li>
      <li class="break-words break-all">
        Commit Hash:
        <code>33a4053ff2bcee43fc3cf3c2285f99607569cbf5</code>
      </li>

      <li>
        <b>PR 363:</b>
        <a
          href="https://github.com/mento-protocol/mento-core/pull/363"
          target="_blank"
        >
            /mento-core/pull/363
        </a>
      </li>
      <li class="break-words break-all">
        Commit Hash:
        <code>54ff960525afcae2b7c91e23203a470447795549</code>
      </li>

      <li>
        <b>PR 365:</b>
        <a
          href="https://github.com/mento-protocol/mento-core/pull/365"
          target="_blank"
        >
            /mento-core/pull/365
        </a>
      </li>
      <li class="break-words break-all">
        Commit Hash:
        <code>86b7b6d8af784b1b2966ed96954c6b5fbe84b8b3</code>
      </li>

      <li>
        <b>PR 366:</b>
        <a
          href="https://github.com/mento-protocol/mento-core/pull/366"
          target="_blank"
        >
            /mento-core/pull/366
        </a>
      </li>
      <li class="break-words break-all">
        Commit Hash:
        <code>45921357224a4898291c9563551e6ab27ae9a553</code>
      </li>

      <li>
        <b>PR 367:</b>
        <a
          href="https://github.com/mento-protocol/mento-core/pull/367"
          target="_blank"
        >
            /mento-core/pull/367
        </a>
      </li>
      <li class="break-words break-all">
        Commit Hash:
        <code>fdaafc7c4c1aa597711f5168c9de995fd7a79037</code>
      </li>

      <li>
        <b>PR 375:</b>
        <a
          href="https://github.com/mento-protocol/mento-core/pull/375"
          target="_blank"
        >
            /mento-core/pull/375
        </a>
      </li>
      <li class="break-words break-all">
        Commit Hash:
        <code>2b142290b076a39be8f9d818a229b9520cb3592c</code>
      </li>
    </ul>
  </content-for>

  <content-for name="source-code">

    <p>Specifically, we audited changes to the following contracts within this repository:</p>

    <template type="file-hashes">
        a55bbeecfab5fe9ffa3b80b2809d801cfaf1089a535e4c7384ba3af7a1d8e3b7  contracts/governance/GovernanceFactory.sol
        258a5937df4cd4fdce455791eb65b44b841b2f08abf76ef5401c3a56099c1911  contracts/governance/MentoToken.sol
        3f537f6ef8502063e0b29741038a84afaa1e9ea8ceb508003494d7c32637a570  contracts/governance/deployers/MentoTokenDeployerLib.sol
        7bfdcbcff52eb90cb4a9a63331a20f1d87a0ae7ac1dba5223d3b8827f832e52a  contracts/governance/Emission.sol
        49c9ef2eeda2e301624e9aab57c0fedffc6d3a02f35a6d0755b520eb7bcae936  contracts/governance/deployers/EmissionDeployerLib.sol
        4005d0ea364880c99dd12f9d924bab75efbb4c06e3afda563a18911ddebead99  contracts/governance/locking/LockingBase.sol
    </template>


  </content-for>
  
</page>