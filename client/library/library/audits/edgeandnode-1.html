<page
  clientName="Edge &amp; Node"
  reportDate="February 24th, 2023"
  auditTitle="Edge &amp; Node A-1"
  auditVersion="1.0.0"
  repoUrl="https://github.com/edgeandnode/subscription-payments"
  repoCommitHash="81a44aede886fc972b2f2422038a804f00789966"
  repoCommitHashFinal="71a8bff74ef30f1e530ae9c922dcfc5e7a2c7983"
  passwordEncrypt="env:PAGE_PASS_EDGEANDNODE_1"

  issueSummaryFormat="table"
  layout="/library/audits/_layout.html"
>
  <content-for name="schedule">
    The security audit was performed by the Macro security team from
    February 13 to February 14, 2023.

    Review of fixes was conducted on February 20, 2023.
  </content-for>

  <content-for name="spec">
    <ul>
      <li>An information summary delivered over chat.</li>
      <li>Discussions on Slack with the {{page.clientName}} team.</li>
    </ul>


    <h2 id="tmaar">Trust Model, Assumptions, and Accepted Risks (TMAAR)</h2>
    <template type="audit-markdown">
      Entities

      - **Gateway** – The nodes that process queries
      - **User** – Creates a Subscription in the contract, funded by themselves or by someone else.
      - **Subscription** – A struct with a start date, end date, and rate per second. Off-chain, intended to represent a subscription to a gateway’s processing resources.
      - **Pending Subscription** – A struct representing a potential subscription, to be fulfilled by a 3rd party (specifically, Banxa for the initial MVP).

      Trust Model

      - Primary goal is to make payments between Users and Gateways more trustless.
      - A User should be able to unsubscribe and get a refund of their balance for any unused Subscription time.
      - It is the gateway’s sole discretion, off-chain, whether or not a subscription is valid. Users are expected to use rates that the gateway agrees with off-chain.

      General Assumptions

      - Subscription statuses are intended to be aggregated and queried through The Graph subgraphs.
    </template>
  </content-for>


<content-for name="source-code">

  <p>Specifically, we audited the following contracts within this repository:</p>

  <template type="file-hashes">
    11c36985938d7c3e8c9265e8c3d32444dd57cdb09f82529ce0b76d776f1408c5  contracts/Subscriptions.sol
  </template>
</content-for>
